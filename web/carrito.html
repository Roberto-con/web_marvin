<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Cache-Control" content="no-store" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Carrito de Compras - Delizia</title>

        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

        <!-- Estilos personalizados -->
        <link rel="stylesheet" href="css/style.css">

        <script>
            const token = localStorage.getItem("token");
            if (!token) {
                localStorage.clear();
                window.location.href = "login.html";
            }

            window.addEventListener("pageshow", function (event) {
                if (event.persisted || performance.navigation.type === 2) {
                    if (!localStorage.getItem("token")) {
                        window.location.href = "login.html";
                    }
                }
            });
        </script>
    </head>
<body>
    <div class="container">
        <h2 class="mb-4 text-center">üõí Carrito de compras</h2>
        <div class="table-responsive">
            <table class="table table-bordered align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Producto</th>
                        <th>Precio unitario</th>
                        <th>Cantidad</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody id="carrito-lista">
                    <!-- Filas generadas por main.js -->
                </tbody>
            </table>
        </div>
        <div class="mb-3 text-end">
            <strong class="fs-5">Total: <span id="carrito-total">0.00</span> Bs</strong>
        </div>
        <form onsubmit="enviarPedido(); return false;">
          <div class="mb-3">
            <label for="nombreCliente" class="form-label">Nombre del cliente</label>
            <input type="text" class="form-control" id="nombreCliente" placeholder="Ej. Juan P√©rez" required>
          </div>
          <div class="text-end">
            <button type="submit" class="btn btn-success px-4">Finalizar pedido</button>
          </div>
        </form>
        <div class="text-end mt-2">
            <button class="btn btn-outline-danger" onclick="vaciarCarrito()">üóëÔ∏è Vaciar carrito</button>
        </div>
        
    </div>

    <script src="js/main.js"></script>
    <script src="js/session.js"></script>
</body>
</html>
